{
  "Comment": "A Hello World example of the Amazon States Language using Pass states",
  "StartAt": "introduction",
  "States": {
    "introduction": {
      "Type": "Task",
      "Resource": "arn:aws:states:::sqs:sendMessage",
      "Parameters": {
          "QueueUrl": "astring",
          "MessageBody":{
              "Input.$": "Welcome to Step Functions Text Based Adventure!\n Verbs: move, examine, take, consume, use\n examples) use key on door, examine door, move door",
              "TaskToken.$": "$$.Task.Token"
          }
      },
      "Next": "jail_cell"
    },
    "jail_cell": {
      "Type": "Task",
      "Resource": "arn:aws:states:::sns:sendMessage.waitForTaskToken",
      "Parameters": {
          "QueueUrl": "astring",
          "MessageBody":{
              "Input.$": "You find yourself in a jail cell.  A 'cell door' lies at one end of the small room near a pile of soiled straw.",
              "TaskToken.$": "$$.Task.Token"
          }
      },
      "Next": "jail_cell_switch"
    },
    "jail_cell_switch": {
        "Type": "Choice",
        "Choices": [
            {
                "Variable": "$.selection",
                "StringEquals": "examine inventory",
                "Next": "examine_inventory"
            },
            {
                "Variable": "$.selection",
                "StringEquals": "move cell door",
                "Next": "cell_door_locked"
            },
            {
                "Variable": "$.selection",
                "StringEquals": "examine room",
                "Next": "jail_cell"
            },
            {
                "Variable": "$.selection",
                "StringEquals": "use picklock cell door",
                "Next": "pick_cell_door"
            }
        ],
        "Default": "unknown_selection"
    },
    "examine_inventory": {
      "Type": "Task",
      "Resource": "arn:aws:states:::sqs:sendMessage",
      "Parameters": {
          "QueueUrl": "astring",
          "MessageBody":{
              "Input.$": "$.state.inventory",
              "TaskToken.$": "$$.Task.Token"
          }
      },
      "Next": "$.state.current_room"
    },
    "cell_door_locked": {
      "Type": "Task",
      "Resource": "arn:aws:states:::sqs:sendMessage",
      "Parameters": {
          "QueueUrl": "astring",
          "MessageBody":{
              "Input.$": "The door is locked. Maybe I have something in my inventory that can help.",
              "TaskToken.$": "$$.Task.Token"
          }
      },
      "Next": "jail_cell"
    },
    "pick_cell_door": {
      "Type": "Task",
      "Resource": "arn:aws:states:::sqs:sendMessage",
      "Parameters": {
          "QueueUrl": "astring",
          "MessageBody":{
              "Input.$": "You reach through the door's bars and insert the picklock into the keyhole.  You hear a soft click as you finese the pick over the locking mechanism. You don't remember learning how to do that... but you don't have time to think about it. The door swings open.",
              "TaskToken.$": "$$.Task.Token"
          }
      },
      "Next": "dungeon"
    },
    "dungeon": {
      "Type": "Task",
      "Resource": "arn:aws:states:::sqs:sendMessage",
      "Parameters": {
          "QueueUrl": "astring",
          "MessageBody":{
              "Input.$": "You reach through the door's bars and insert the picklock into the keyhole.  You hear a soft click as you finese the pick over the locking mechanism. You don't remember learning how to do that... but you don't have time to think about it. The door swings open.",
              "TaskToken.$": "$$.Task.Token"
          }
      },
      "End": true
    }
  }
}